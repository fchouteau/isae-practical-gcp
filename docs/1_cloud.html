<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>ISAE Cloud 4 Data Scientists</title>
    <meta property="og:title" content="ISAE Cloud 4 Data Scientists" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://fchouteau.github.io/isae-practical-gcp/featured-slide.jpg" />
    <meta property="og:url" content="https://fchouteau.github.io/isae-practical-gcp" />
    <link rel="stylesheet" href="./css/reveal.css" />
    <link rel="stylesheet" href="./css/theme/solarized.css" id="theme" />
    <link rel="stylesheet" href="./css/highlight/solarized-light.css" />
    <link rel="stylesheet" href="./css/print/paper.css" type="text/css" media="print" />
    <link rel="stylesheet" href="./css/style.css" />

  </head>
  <body>
    <div class="reveal">
      <div class="slides"><section ><section data-markdown><script type="text/template">

# Part 1: virtualization and Cloud Computing

**ISAE-SUPAERO, SDD, 26th November 2019**

Florient CHOUTEAU, Dennis WILSON

</script></section><section data-markdown><script type="text/template">

### Outline

- **Presentation** (1h)
    - Intro to virtualization
    - The Cloud
    - Google Cloud Platform
- **Self-Paced Workshop** (2h)
- **QCM/Evaluation** (15 minutes)

</script></section><section data-markdown><script type="text/template">

### This class and its workshop will be successful if you...

- ...have a rough idea of what is "cloud computing" <!-- .element: class="fragment" data-fragment-index="1" -->
- ...have a rough idea of what is "google cloud platform" <!-- .element: class="fragment" data-fragment-index="2" -->
- ...know how to create a instance and connect to it via SSH <!-- .element: class="fragment" data-fragment-index="3" -->
- ...have interacted with google cloud storage <!-- .element: class="fragment" data-fragment-index="4" -->
- ...know that IAC means Infrastructure as Code <!-- .element: class="fragment" data-fragment-index="5" -->

</script></section><section data-markdown><script type="text/template">

![](https://www.explainxkcd.com/wiki/images/2/28/the_cloud.png)

</script></section></section><section ><section data-markdown><script type="text/template">

### Virtualization

</script></section><section data-markdown><script type="text/template">

> In computing, virtualization refers to the act of creating a virtual (rather than actual) version of something, including virtual computer hardware platforms, storage devices, and computer network resources. 

Wikipedia

</script></section><section data-markdown><script type="text/template">

![](static/img/evolution_of_virtualization.png)

</script></section><section data-markdown><script type="text/template">

### Vocabulary

- Hypervisor (VMWare, Virtualbox,  [KVM](https://en.wikipedia.org/wiki/Kernel-based_Virtual_Machine)): A hypervisor is a program for creating and running virtual machines.
- Virtual Machine: A virtual machine is the emulated equivalent of a computer system that runs on top of another system
- Containers: Isolated environments that share the same underlying OS (**more this afternoon**)

</script></section><section data-markdown><script type="text/template">

### Evolution of Virtualization

![](https://miro.medium.com/max/10698/1*wE7TrQmFyRTDwh6VpbkbMQ.png)

</script></section><section data-markdown><script type="text/template">

![](https://yogeek.github.io/enseignement/Introduction_Virtualisation_CloudComputing/img/but_why.gif)

</script></section><section data-markdown><script type="text/template">

![](https://i.kym-cdn.com/photos/images/newsfeed/000/038/431/Technologically-Impaired-Duck-Where-can-I-download--More-RAM8.jpg)

>  Any sufficiently advanced technology is indistinguishable from magic. 

Clarke Third Law

</script></section><section data-markdown><script type="text/template">

### Hardware abstraction

- Hardware Abstraction ("download more RAM")
- Fine-grained resource allocation / sharing
- Decouple maintenance of hardware from maintenance of software

</script></section><section data-markdown><script type="text/template">

### Availability, security

![](https://yogeek.github.io/enseignement/Introduction_Virtualisation_CloudComputing/img/vm_charge_repartition.gif) <!-- .element height="40%" width="40%" background:none; -->

</script></section><section data-markdown><script type="text/template">

### Why are we talking about this ?

![](https://miro.medium.com/max/469/1*24oTbi-r9SXkkJjtV2_B2A.png) 

</script></section></section><section ><section data-markdown><script type="text/template">

## Cloud Computing

</script></section><section data-markdown><script type="text/template">

### In short...

- Externalization of computing resources
- Short-lease (or long-lease...) lending 
- In scalable quantities

</script></section><section data-markdown><script type="text/template">

### In short...

- Use infra without owning it
- Pay-per-use
- Usually using code to manage it (**infrastructure as code**)

</script></section><section data-markdown><script type="text/template">

![](https://blog.scottlogic.com/dsmith/assets/featured/aws-logo.png)

... an origin story

</script></section><section data-markdown><script type="text/template">

The year is 2002 and Amazon is encountering scaling issues...

![](https://cdn.chiefmartec.com/wp-content/uploads/2016/11/jeff_bezos_big_mandate.jpg)

</script></section><section data-markdown><script type="text/template">

Amazon got good at building scalable infrastructure...

- For themselves
- But also for other partners (target)

And that infrastructure is often there to answer peak load...

</script></section><section data-markdown><script type="text/template">

2002-2003; The idea

> Building an infrastructure that is completely standardized, completely automated, and relied extensively on web services for things like storage

http://blog.b3k.us/2009/01/25/ec2-origins.html

</script></section><section data-markdown><script type="text/template">

Let's sell it !

![](static/img/ec2.png)

</script></section><section data-markdown><script type="text/template">

In 2018

![](https://www.fourquadrant.com/wp-content/uploads/2018/10/Screenshot-2018-10-14-08.37.18.png)

</script></section><section data-markdown><script type="text/template">

How can Amazon spend this much on free shipping ?

![](https://zdnet1.cbsistatic.com/hub/i/2019/01/31/90cc9931-483b-4512-b94c-20777c1e9694/122bf253e0610093f41ce36f3ce220e7/amazon2.png)

</script></section><section data-markdown><script type="text/template">

### Cloud Computing: A technical *evolution*

- More Virtualization
- More API
- More Managed Services

</script></section><section data-markdown><script type="text/template">

### Cloud Computing: A usage **revolution**

- Outsourcing maintenance, security, development of new services
- Infinitely scalable infrastructure
- No need to plan out infrastructure
    - Enabling innovation
    - Power in the hands of developpers/builders

</script></section><section data-markdown><script type="text/template">

### Cloud Computing: A usage **revolution**

- We interact with cloud providers using API...

```bash
gcloud compute --project=deeplearningsps instances create ${INSTANCE_NAME} \
    --zone=${ZONE} \
    --machine-type=n1-standard-8 \
    --scopes=default,storage-rw,compute-rw \
    --maintenance-policy=TERMINATE \
    --image-family=ubuntu-1804-lts \
    --image-project=ubuntu-os-cloud \
    --boot-disk-size=200GB \
    --boot-disk-type=pd-standard \
    --accelerator=type=nvidia-tesla-p100,count=1 \
    --metadata-from-file startup-script=startup_script.sh
```

</script></section><section data-markdown><script type="text/template">

### Before

![](https://i.pinimg.com/originals/6b/92/a0/6b92a03c8b87aa448f8206ee57b5a4fc.jpg)

</script></section><section data-markdown><script type="text/template">

### After

```yaml
resources:
- name: vm-created-by-deployment-manager
  type: compute.v1.instance
  properties:
    zone: us-central1-a
    machineType: zones/us-central1-a/machineTypes/n1-standard-1
    disks:
    - deviceName: boot
      type: PERSISTENT
      boot: true
      autoDelete: true
      initializeParams:
        sourceImage: projects/debian-cloud/global/images/family/debian-9
    networkInterfaces:
    - network: global/networks/default
```

</script></section><section data-markdown><script type="text/template">

### Infrastructure as Code

- Infra is now managed via text files
- Data is securely stored on storage
- So we store code + urls on git... and everything is reproducible !
- We use automated deployment tools (terraform, gcp deployment manager...) 

</script></section><section data-markdown><script type="text/template">

### Pet vs Cattle

![](static/img/pet-vs-cattle.png)

</script></section><section data-markdown><script type="text/template">

### IaaS, PaaS, SaaS

![](https://miro.medium.com/max/1313/1*0z9Pqwn7ujypQ396wleJ1Q.png)

</script></section><section data-markdown><script type="text/template">

### PaaS

![](https://cdn.ttgtmedia.com/rms/onlineimages/itops-pizza_as_a_service.png)

</script></section><section data-markdown><script type="text/template">

### Hybrid, Private, Public

![](https://www.cisecurity.org/wp-content/uploads/2019/06/hybrid-cloud-environment.png)

</script></section><section data-markdown><script type="text/template">

### Who ?

![](https://yogeek.github.io/enseignement/Introduction_Virtualisation_CloudComputing/img/cloud_vendors.jpg)

</script></section><section data-markdown><script type="text/template">

### You are using the cloud every day !

- Apple: 350m$ on AWS / year
- Spotify: 150m$ on GCP / year
- Lyft: 100m$ on AWS / year  


</script></section><section data-markdown><script type="text/template">

### Anecdotes

![](https://storage.googleapis.com/gweb-cloudblog-publish/images/google-cloud-pokemon-go-1kwkj.max-700x700.PNG)
https://cloud.google.com/blog/products/gcp/bringing-pokemon-go-to-life-on-google-cloud

</script></section><section data-markdown><script type="text/template">

### More Anectores

http://highscalability.com

http://highscalability.com/all-time-favorites

Mind boggling statistics: https://aws.amazon.com/blogs/aws/amazon-prime-day-2019-powered-by-aws/

</script></section></section><section ><section data-markdown><script type="text/template">

![](https://miro.medium.com/max/12516/1*CMz4r3-pEFp3Po6oHv-JxQ.png)  <!-- .element background=none; -->

</script></section><section data-markdown><script type="text/template">

### GCP in brief

- One of the main cloud provider
- Behind AWS in SaaS (serverless...)
- More "readable" product line (for a Cloud Provider...)
- Very good "virtual machine" management (per second billing, fine-grained resource allocation)

</script></section><section data-markdown><script type="text/template">

![](https://static.packt-cdn.com/products/9781788837675/graphics/ee72c164-888d-4cec-b3f9-efd3b8e8e4cb.png)

</script></section><section data-markdown><script type="text/template">

![](static/img/DarkPoster-hires.png)

</script></section><section data-markdown><script type="text/template">

### Concepts: Zones and Regions

![](https://cloud.google.com/docs/images/overview/regions-zones.svg)

</script></section><section data-markdown><script type="text/template">

### Concepts: Projects

![](https://cloud.google.com/docs/images/overview/console-ids.png)

- Access (Enabling API/Services)
- Ressources (Quota by project)
- Networking
- Billing

</script></section><section data-markdown><script type="text/template">

### Concepts: Identity and Access Management

![](https://miro.medium.com/max/638/0*kGyUfNWZCk78hmPU.)

</script></section><section data-markdown><script type="text/template">

### Main Products we are going to be looking at

- Google Compute Engine (virtual machine solutions)
- Google Cloud Storage (storage solutions)

</script></section><section data-markdown><script type="text/template">

### GCE Basics:

- The VM solution for GCP
- Images: Boot disks for VM instances
    example:  `ubuntu-1804`
- Machine Types: Ressources available to your instance
    example: `n1-standard-8` (8 vCPU, 30 Gb RAM)
- Storage Options: "Attached disk" that can persist once the instance is destroyed... can be HDD, SDD...
- Preemptible: "Spot instances" on AWS", cheap but can be killed any minute by GCP

</script></section><section data-markdown><script type="text/template">

### GCS Basics:

- Cheaper storage than persistent disks
- Can be shared between multiple instances / zones
- Higher latency
- Several types of storage (w/ different r/w costs & performance)
- Data is stored in "buckets" **whose name are globally unique**


</script></section><section data-markdown><script type="text/template">

### Interacting with GCP:

- Using the gcloud CLI: https://cloud.google.com/sdk/install
- Using Google Cloud Shell: A small VM instance you can connect to with your browser

</script></section></section><section ><section data-markdown><script type="text/template">

## Self-paced Workshop

</script></section><section data-markdown><script type="text/template">

### Objectives

- Configure your GCP credentials / account
- Launch your firsts VMs
- Connect to them via SSH & discover tmux


</script></section><section data-markdown><script type="text/template">

### Demo

- Google Compute Engine Interface
- Google Cloud Shell

</script></section><section data-markdown><script type="text/template">

### Network shennanigans

- If you are on **Eduroam** use either your terminal or Google Cloud Shell
- If you are on **ISAE-EDU** use Google Cloud Shell
- If you are on **4G** use either your terminal or Google Cloud Shell

</script></section><section data-markdown><script type="text/template">

- If you are on **Windows** it is recommended that you use cloud shell except if you have *WSL* (linux for windows) or *putty* installed
- If you want to do everything from your computer you have to install the gcloud sdk https://cloud.google.com/sdk/install

</script></section><section data-markdown><script type="text/template">

### SSH (Secure Shell)

![](https://www.oracle.com/webfolder/technetwork/tutorials/obe/cloud/dbaas/obe_dbaas_connecting_to_an_instance/images/key%20based%20authentication.jpg)

</script></section><section data-markdown><script type="text/template">

### TMUX (Terminal Multiplexing)

![](https://www.hamvocke.com/assets/img/uploads/tmux.png) <!-- .element height="40%" width="40%" background:none; -->

- A terminal multiplexer
- Detachable sessions

</script></section><section data-markdown><script type="text/template">

[Your turn !](https://github.com/fchouteau/isae-practical-gcp/tree/master/1-intro-to-cloud)

</script></section><section data-markdown><script type="text/template">

### QCM time !

http://kahoot.it

GAME PIN: 
</script></section></section></div>
    </div>

    <script src="./js/reveal.js"></script>

    <script>
      function extend() {
        var target = {};
        for (var i = 0; i < arguments.length; i++) {
          var source = arguments[i];
          for (var key in source) {
            if (source.hasOwnProperty(key)) {
              target[key] = source[key];
            }
          }
        }
        return target;
      }

      // Optional libraries used to extend on reveal.js
      var deps = [
        { src: './plugin/markdown/marked.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
        { src: './plugin/markdown/markdown.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
        { src: './plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: './plugin/zoom-js/zoom.js', async: true },
        { src: './plugin/notes/notes.js', async: true },
        { src: './plugin/math/math.js', async: true }
      ];

      // default options to init reveal.js
      var defaultOptions = {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'default', // none/fade/slide/convex/concave/zoom
        dependencies: deps
      };

      // options from URL query string
      var queryOptions = Reveal.getQueryHash() || {};

      var options = extend(defaultOptions, {"transition":"fade","transitionSpeed":"default","controls":false}, queryOptions);
    </script>


    <script>
      Reveal.initialize(options);
    </script>
  </body>
</html>
